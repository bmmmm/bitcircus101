<!doctype html>
<html lang="de">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Kommende Veranstaltungen – bitcircus101</title>
        <meta name="title" content="Kommende Veranstaltungen – bitcircus101" />
        <meta
            name="description"
            content="Alle aktuellen Termine, Events und offenen Treffen im bitcircus101. Schau vorbei und mach mit!"
        />
        <meta name="robots" content="index, follow" />
        <meta property="og:type" content="website" />
        <meta property="og:url" content="https://bitcircus101.de/events.html" />
        <meta
            property="og:title"
            content="Kommende Veranstaltungen – bitcircus101"
        />
        <meta
            property="og:description"
            content="Alle aktuellen Termine, Events und offenen Treffen im bitcircus101. Schau vorbei und mach mit!"
        />
        <link rel="canonical" href="https://bitcircus101.de/events.html" />
        <link rel="stylesheet" href="style.css" />
    </head>
    <body>
        <header>
            <nav id="main-nav" aria-label="Hauptnavigation">
                <button
                    class="menu-toggle"
                    id="menu-toggle"
                    aria-controls="main-nav"
                    aria-expanded="false"
                >
                    ☰ Menü
                </button>
                <ul>
                    <li><a href="index.html">Start</a></li>
                    <li><a href="index.html#about">Über uns</a></li>
                    <li><a href="events.html">Veranstaltungen</a></li>
                    <li><a href="donations.html">Spenden</a></li>
                    <li><a href="index.html#contact">Kontakt</a></li>
                    <li>
                        <a href="impressum-datenschutz.html"
                            >Impressum & Datenschutz</a
                        >
                    </li>
                </ul>
            </nav>
        </header>
        <div class="container">
            <section>
                <h1>Kommende Veranstaltungen</h1>
                <p>
                    Neben gebuchten Workshops bieten wir regelmäßige offene
                    Veranstaltungen an. Im Kalender findest du alle aktuellen
                    Termine.
                </p>
                <p class="privacy-notice">
                    ℹ️ Unsere Kalender liegen auf unserer sicheren
                    Nextcloud‑Instanz (nc.6bm.de). Es werden keine Tracker oder
                    Cookies von Drittanbietern verwendet.
                </p>

                <div class="calendar-controls">
                    <h3>Kalender-Ansicht</h3>
                    <div>
                        <label>
                            <input
                                type="checkbox"
                                id="calendar1-toggle"
                                checked
                            />
                            <span>🎯 Hauptkalender (Events & Workshops)</span>
                        </label>
                        <label>
                            <input
                                type="checkbox"
                                id="calendar2-toggle"
                                checked
                            />
                            <span
                                >🚴 Zusatzkalender (Radrennen &
                                Sporttermine)</span
                            >
                        </label>
                    </div>
                </div>

                <div class="calendar-downloads">
                    <h4>📅 Kalender-Downloads</h4>
                    <div>
                        <a
                            href="https://nc.6bm.de/remote.php/dav/public-calendars/DCaFSYECrcTJRJjC?export"
                            target="_blank"
                            rel="noopener"
                            download="bitcircus101-hauptkalender.ics"
                        >
                            💾 Hauptkalender (ICS)
                        </a>
                        <a
                            href="https://nc.6bm.de/remote.php/dav/public-calendars/eXAebopPy9xZQCZT?export"
                            target="_blank"
                            rel="noopener"
                            download="bitcircus101-zusatzkalender.ics"
                        >
                            💾 Zusatzkalender (ICS)
                        </a>
                    </div>
                    <p class="calendar-fallback">
                        Lade die ICS-Dateien herunter und importiere sie in
                        deinen eigenen Kalender.
                    </p>
                </div>

                <p
                    class="calendar-fallback"
                    style="font-size: 0.9em; color: #666; margin-bottom: 20px"
                >
                    🛡️ Kalender nicht sichtbar? Prüfe deine Privacy‑ oder
                    Ad‑Block‑Einstellungen oder öffne sie direkt:
                    <a
                        href="https://nc.6bm.de/apps/calendar/p/DCaFSYECrcTJRJjC"
                        target="_blank"
                        rel="noopener"
                        >Hauptkalender</a
                    >
                    |
                    <a
                        href="https://nc.6bm.de/apps/calendar/p/eXAebopPy9xZQCZT"
                        target="_blank"
                        rel="noopener"
                        >Zusatzkalender</a
                    >
                </p>
                <div class="calendars-container">
                    <!-- Hauptkalender -->
                    <div class="calendar-container" id="calendar1-container">
                        <h4 style="text-align: center; margin-bottom: 10px">
                            🎯 Hauptkalender (Events & Workshops)
                        </h4>
                        <iframe
                            id="calendar1-iframe"
                            width="800"
                            height="600"
                            src="https://nc.6bm.de/apps/calendar/embed/DCaFSYECrcTJRJjC/listMonth/now"
                            frameborder="0"
                            scrolling="no"
                            sandbox="allow-scripts allow-same-origin allow-popups"
                            loading="lazy"
                            referrerpolicy="no-referrer-when-downgrade"
                            title="bitcircus101 Hauptkalender"
                        ></iframe>
                        <div
                            class="calendar-placeholder"
                            id="calendar1-placeholder"
                        >
                            <p>
                                Der Hauptkalender wird auf der Live‑Site
                                angezeigt
                            </p>
                        </div>
                    </div>

                    <!-- Zusatzkalender -->
                    <div class="calendar-container" id="calendar2-container">
                        <h4 style="text-align: center; margin-bottom: 10px">
                            🚴 Zusatzkalender (Radrennen & Sporttermine)
                        </h4>
                        <iframe
                            id="calendar2-iframe"
                            width="800"
                            height="600"
                            src="https://nc.6bm.de/apps/calendar/embed/eXAebopPy9xZQCZT/listMonth/now"
                            frameborder="0"
                            scrolling="no"
                            sandbox="allow-scripts allow-same-origin allow-popups"
                            loading="lazy"
                            referrerpolicy="no-referrer-when-downgrade"
                            title="bitcircus101 Zusatzkalender"
                        ></iframe>
                        <div
                            class="calendar-placeholder"
                            id="calendar2-placeholder"
                        >
                            <p>
                                Der Zusatzkalender wird auf der Live‑Site
                                angezeigt
                            </p>
                        </div>
                    </div>
                </div>
                <div class="linkup-description">
                    <h3>linkup@bitcircus101</h3>
                    <p>
                        Unser monatliches Highlight: linkup@bitcircus101 findet
                        jeden dritten Freitag im Monat ab 20 Uhr statt. Freu
                        dich auf Lightning Talks (3 Folien, 3 Minuten) und
                        anschließend lockere Gespräche.
                    </p>
                    <p>
                        An den übrigen Freitagen laden wir ab 20 Uhr zum Casual
                        linkup – bring deine Ideen mit, genieß Getränke &amp;
                        Snacks und vernetze dich mit der Tech‑Community!
                    </p>
                    <p>
                        Fragen?
                        <a href="index.html#contact">Kontaktiere uns</a> – wir
                        freuen uns!
                    </p>
                </div>
            </section>
            <div class="back-link">
                <a href="index.html">← Zurück zur Startseite</a>
            </div>
        </div>
        <footer class="footer">
            <div class="footer__container">
                <a
                    href="https://github.com/bmmmm/bitcircus101"
                    target="_blank"
                    rel="noopener"
                    class="footer__github-link"
                >
                    🚀 Mitmachen oder Feedback auf GitHub:
                    <span class="footer__github-link-text">bitcircus101</span>
                </a>
            </div>
        </footer>
        <script>
            document.addEventListener("DOMContentLoaded", function () {
                const isDevelopment =
                    window.location.hostname === "127.0.0.1" ||
                    window.location.hostname === "localhost";

                // Calendar configurations
                const calendars = [
                    {
                        id: "calendar1",
                        name: "Hauptkalender",
                        directUrl:
                            "https://nc.6bm.de/apps/calendar/p/DCaFSYECrcTJRJjC",
                        downloadUrl:
                            "https://nc.6bm.de/remote.php/dav/public-calendars/DCaFSYECrcTJRJjC?export",
                        downloadName: "bitcircus101-hauptkalender.ics",
                    },
                    {
                        id: "calendar2",
                        name: "Zusatzkalender",
                        directUrl:
                            "https://nc.6bm.de/apps/calendar/p/eXAebopPy9xZQCZT",
                        downloadUrl:
                            "https://nc.6bm.de/remote.php/dav/public-calendars/eXAebopPy9xZQCZT?export",
                        downloadName: "bitcircus101-zusatzkalender.ics",
                    },
                ];

                // Initialize each calendar
                calendars.forEach(function (cal) {
                    const iframe = document.getElementById(cal.id + "-iframe");
                    const placeholder = document.getElementById(
                        cal.id + "-placeholder",
                    );
                    const container = document.getElementById(
                        cal.id + "-container",
                    );
                    const toggle = document.getElementById(cal.id + "-toggle");

                    if (!iframe || !placeholder || !container || !toggle)
                        return;

                    // Handle toggle functionality
                    toggle.addEventListener("change", function () {
                        container.style.display = this.checked
                            ? "block"
                            : "none";
                    });

                    // Show placeholder in development
                    if (isDevelopment) {
                        iframe.style.display = "none";
                        return;
                    }

                    // Hide placeholder initially in production
                    placeholder.style.display = "none";

                    // Set up iframe load detection
                    let iframeLoaded = false;
                    let loadTimeout;

                    function showFallback() {
                        iframe.style.display = "none";
                        placeholder.style.display = "flex";
                        placeholder.innerHTML = `
                            <div style="text-align: center; padding: 20px;">
                                <p style="color: #666; margin-bottom: 15px;">
                                    🛡️ Der ${cal.name} wird von deinem Browser oder einer Erweiterung blockiert.
                                </p>
                                <p style="margin-bottom: 15px;">
                                    <a href="${cal.directUrl}"
                                       target="_blank" rel="noopener"
                                       style="color: #4285f4; text-decoration: none; font-weight: bold;">
                                        📅 ${cal.name} direkt öffnen
                                    </a>
                                </p>
                                <p>
                                    <a href="${cal.downloadUrl}"
                                       target="_blank" rel="noopener"
                                       style="color: #4285f4; text-decoration: none;"
                                       download="${cal.downloadName}">
                                        💾 Als ICS-Datei herunterladen
                                    </a>
                                </p>
                            </div>
                        `;
                    }

                    // Set timeout to detect if iframe fails to load
                    loadTimeout = setTimeout(function () {
                        if (!iframeLoaded) {
                            showFallback();
                        }
                    }, 5000); // 5 seconds timeout

                    // Handle iframe load success
                    iframe.addEventListener("load", function () {
                        iframeLoaded = true;
                        clearTimeout(loadTimeout);
                    });

                    // Handle iframe load error
                    iframe.addEventListener("error", function () {
                        clearTimeout(loadTimeout);
                        showFallback();
                    });

                    // Additional check for Privacy Badger or similar blockers
                    setTimeout(function () {
                        try {
                            // Try to access iframe content (will fail if blocked)
                            const iframeDoc =
                                iframe.contentDocument ||
                                iframe.contentWindow.document;
                            if (
                                !iframeDoc ||
                                iframeDoc.body.innerHTML.trim() === ""
                            ) {
                                showFallback();
                            }
                        } catch (e) {
                            // Cross-origin error is expected, but complete blocking will cause other errors
                            if (e.name !== "SecurityError") {
                                showFallback();
                            }
                        }
                    }, 3000);
                });
            });
        </script>
        <script defer src="main.js"></script>
    </body>
</html>
